# üîç –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –≤ Pipeline

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

Pipeline –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ **—Ñ–∏–ª—å—Ç—Ä—É–µ—Ç** —Ç–æ–≤–∞—Ä—ã –ø–æ –¥–≤—É–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º:

### 1Ô∏è‚É£ **–§–∏–ª—å—Ç—Ä –ø–æ —Ü–µ–Ω–µ**
‚ùå –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Ç–æ–≤–∞—Ä—ã, –µ—Å–ª–∏:
- –¶–µ–Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–ø—É—Å—Ç–æ–µ –ø–æ–ª–µ)
- –¶–µ–Ω–∞ = 0
- –¶–µ–Ω–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è (–Ω–µ —á–∏—Å–ª–æ)

### 2Ô∏è‚É£ **–§–∏–ª—å—Ç—Ä –ø–æ –Ω–∞–ª–∏—á–∏—é**
‚ùå –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Ç–æ–≤–∞—Ä—ã, –µ—Å–ª–∏:
- –ù–∞–ª–∏—á–∏–µ: "–ù–µ–º–∞—î", "–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏", "–í—ñ–¥—Å—É—Ç–Ω—ñ–π"
- –ù–∞–ª–∏—á–∏–µ: –ø—É—Å—Ç–æ–µ –ø–æ–ª–µ
- –ù–∞–ª–∏—á–∏–µ: –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å—Ç–∞—Ç—É—Å

‚úÖ –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Ç–æ–≤–∞—Ä—ã, –µ—Å–ª–∏:
- –ù–∞–ª–∏—á–∏–µ: "–í –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ", "–í –Ω–∞–ª–∏—á–∏–∏", "–Ñ –≤ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ"
- –ù–∞–ª–∏—á–∏–µ: "–í –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ 5 —à—Ç" (–∏–ª–∏ –ª—é–±–æ–µ —á–∏—Å–ª–æ)

---

## üîÑ –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–ª–∏—á–∏—è

### –ü—Ä–∞–≤–∏–ª–æ 1: "–í –Ω–∞–ª–∏—á–∏–∏" ‚Üí "+"
```
–í—Ö–æ–¥:  –ù–∞—è–≤–Ω—ñ—Å—Ç—å = "–í –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ"
–í—ã—Ö–æ–¥: –ù–∞—è–≤–Ω—ñ—Å—Ç—å = "+", –ö—ñ–ª—å–∫—ñ—Å—Ç—å = ""
```

### –ü—Ä–∞–≤–∏–ª–æ 2: "–í –Ω–∞–ª–∏—á–∏–∏ 5 —à—Ç" ‚Üí –ù–∞—è–≤–Ω—ñ—Å—Ç—å: "+", –ö—ñ–ª—å–∫—ñ—Å—Ç—å: "5"
```
–í—Ö–æ–¥:  –ù–∞—è–≤–Ω—ñ—Å—Ç—å = "–í –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ 15 —à—Ç"
–í—ã—Ö–æ–¥: –ù–∞—è–≤–Ω—ñ—Å—Ç—å = "+", –ö—ñ–ª—å–∫—ñ—Å—Ç—å = "15"
```

```
–í—Ö–æ–¥:  –ù–∞—è–≤–Ω—ñ—Å—Ç—å = "–Ñ –≤ –Ω–∞–ª–∏—á–∏–∏ 100"
–í—ã—Ö–æ–¥: –ù–∞—è–≤–Ω—ñ—Å—Ç—å = "+", –ö—ñ–ª—å–∫—ñ—Å—Ç—å = "100"
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è spider'–∞ –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:

```
================================================================================
üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –§–ò–õ–¨–¢–†–ê–¶–ò–ò
================================================================================
‚úÖ –†–æ–∑–Ω–∏—á–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞–ø–∏—Å–∞–Ω–æ: 1256
‚úÖ –î–∏–ª–µ—Ä—Å–∫–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞–ø–∏—Å–∞–Ω–æ: 1189
‚ùå –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ –±–µ–∑ —Ü–µ–Ω—ã: 45
‚ùå –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ –±–µ–∑ –Ω–∞–ª–∏—á–∏—è: 312
================================================================================
```

---

## üìÅ –ü—É—Ç—å –∫ —Ñ–∞–π–ª–∞–º

**–ò–ó–ú–ï–ù–ï–ù–û!** –¢–µ–ø–µ—Ä—å —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤:
```
C:\FullStack\Scrapy\output\prom_import.csv       (—Ä–æ–∑–Ω–∏—Ü–∞)
C:\FullStack\Scrapy\output\prom_diler_import.csv (–¥–∏–ª–µ—Ä)
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

### –í–∫–ª—é—á–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á–µ–Ω–æ)

Pipeline —É–∂–µ –≤–∫–ª—é—á–µ–Ω –≤ `settings.py`:
```python
ITEM_PIPELINES = {
    "suppliers.pipelines.SuppliersPipeline": 300,
}
```

### –û—Ç–∫–ª—é—á–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –í–°–ï —Ç–æ–≤–∞—Ä—ã (–¥–∞–∂–µ –±–µ–∑ —Ü–µ–Ω—ã/–Ω–∞–ª–∏—á–∏—è), –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ `pipelines.py` (—Å—Ç—Ä–æ–∫–∏ 135-153):

```python
# ========== –§–ò–õ–¨–¢–† 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–Ω—ã ==========
# if not price or not self._is_valid_price(price):
#     self.filtered_no_price += 1
#     raise ValueError("–¢–æ–≤–∞—Ä –±–µ–∑ —Ü–µ–Ω—ã")

# ========== –§–ò–õ–¨–¢–† 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è ==========
# if not availability_status:
#     self.filtered_no_stock += 1
#     raise ValueError("–¢–æ–≤–∞—Ä –Ω–µ –≤ –Ω–∞–ª–∏—á–∏–∏")
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:

```bash
cd /c/FullStack/Scrapy/suppliers

# –ó–∞–ø—É—Å–∫ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏
scrapy crawl viatec_retail -s LOG_LEVEL=DEBUG

# –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å 50 —Ç–æ–≤–∞—Ä–∞–º–∏ –¥–ª—è —Ç–µ—Å—Ç–∞
scrapy crawl viatec_retail -s CLOSESPIDER_ITEMCOUNT=50
```

### –ß—Ç–æ –∏—Å–∫–∞—Ç—å –≤ –ª–æ–≥–∞—Ö:

‚úÖ **–£—Å–ø–µ—à–Ω–∞—è –∑–∞–ø–∏—Å—å:**
```
üõí –†–æ–∑–Ω–∏—Ü–∞: IP –≤—ñ–¥–µ–æ–∫–∞–º–µ—Ä–∞ Hikvision... | –¶–µ–Ω–∞: 1234.50 | –ö–æ–ª-–≤–æ: 5
```

‚ùå **–û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ –±–µ–∑ —Ü–µ–Ω—ã:**
```
‚ö†Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω —Ç–æ–≤–∞—Ä –±–µ–∑ —Ü–µ–Ω—ã: –ö–∞–º–µ—Ä–∞ XYZ
```

‚ùå **–û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ –±–µ–∑ –Ω–∞–ª–∏—á–∏—è:**
```
‚ö†Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω —Ç–æ–≤–∞—Ä –Ω–µ –≤ –Ω–∞–ª–∏—á–∏–∏: –†–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä ABC [–ù–µ–º–∞—î –≤ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ]
```

---

## üìã –ü—Ä–∏–º–µ—Ä—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –ü—Ä–∏–º–µ—Ä 1: –¢–æ–≤–∞—Ä —Å —Ü–µ–Ω–æ–π –∏ –Ω–∞–ª–∏—á–∏–µ–º ‚úÖ
```python
–í—Ö–æ–¥:
{
    "–ù–∞–∑–≤–∞_–ø–æ–∑–∏—Ü—ñ—ó": "IP –∫–∞–º–µ—Ä–∞ Hikvision DS-2CD1321",
    "–¶—ñ–Ω–∞": "2450.00",
    "–ù–∞—è–≤–Ω—ñ—Å—Ç—å": "–í –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ 10 —à—Ç"
}

–í—ã—Ö–æ–¥ –≤ CSV:
–ù–∞–∑–≤–∞_–ø–æ–∑–∏—Ü—ñ—ó;–¶—ñ–Ω–∞;–ù–∞—è–≤–Ω—ñ—Å—Ç—å;–ö—ñ–ª—å–∫—ñ—Å—Ç—å
IP –∫–∞–º–µ—Ä–∞ Hikvision DS-2CD1321;2450.00;+;10
```

### –ü—Ä–∏–º–µ—Ä 2: –¢–æ–≤–∞—Ä –±–µ–∑ —Ü–µ–Ω—ã ‚ùå
```python
–í—Ö–æ–¥:
{
    "–ù–∞–∑–≤–∞_–ø–æ–∑–∏—Ü—ñ—ó": "–ö—Ä–æ–Ω—à—Ç–µ–π–Ω –¥–ª—è –∫–∞–º–µ—Ä—ã",
    "–¶—ñ–Ω–∞": "",
    "–ù–∞—è–≤–Ω—ñ—Å—Ç—å": "–í –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ"
}

–†–µ–∑—É–ª—å—Ç–∞—Ç: –û–¢–§–ò–õ–¨–¢–†–û–í–ê–ù–û (–Ω–µ –ø–æ–ø–∞–¥—ë—Ç –≤ CSV)
```

### –ü—Ä–∏–º–µ—Ä 3: –¢–æ–≤–∞—Ä –Ω–µ –≤ –Ω–∞–ª–∏—á–∏–∏ ‚ùå
```python
–í—Ö–æ–¥:
{
    "–ù–∞–∑–≤–∞_–ø–æ–∑–∏—Ü—ñ—ó": "DVR Dahua XVR5108HS",
    "–¶—ñ–Ω–∞": "5600.00",
    "–ù–∞—è–≤–Ω—ñ—Å—Ç—å": "–ù–µ–º–∞—î –≤ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ"
}

–†–µ–∑—É–ª—å—Ç–∞—Ç: –û–¢–§–ò–õ–¨–¢–†–û–í–ê–ù–û (–Ω–µ –ø–æ–ø–∞–¥—ë—Ç –≤ CSV)
```

### –ü—Ä–∏–º–µ—Ä 4: –¢–æ–≤–∞—Ä —Å —Ü–µ–Ω–æ–π, –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ ‚úÖ
```python
–í—Ö–æ–¥:
{
    "–ù–∞–∑–≤–∞_–ø–æ–∑–∏—Ü—ñ—ó": "HDD 2TB Seagate",
    "–¶—ñ–Ω–∞": "3200.00",
    "–ù–∞—è–≤–Ω—ñ—Å—Ç—å": "–í –Ω–∞–ª–∏—á–∏–∏"
}

–í—ã—Ö–æ–¥ –≤ CSV:
–ù–∞–∑–≤–∞_–ø–æ–∑–∏—Ü—ñ—ó;–¶—ñ–Ω–∞;–ù–∞—è–≤–Ω—ñ—Å—Ç—å;–ö—ñ–ª—å–∫—ñ—Å—Ç—å
HDD 2TB Seagate;3200.00;+;
```

---

## üîç –õ–æ–≥–∏–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞

–†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –∏—â–µ—Ç **–ø–µ—Ä–≤–æ–µ —á–∏—Å–ª–æ** –≤ —Å—Ç—Ä–æ–∫–µ –Ω–∞–ª–∏—á–∏—è:

```python
# –ü—Ä–∏–º–µ—Ä—ã:
"–í –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ 5 —à—Ç"     ‚Üí "5"
"–Ñ –≤ –Ω–∞–ª–∏—á–∏–∏ 100"      ‚Üí "100"
"–í –Ω–∞–ª–∏—á–∏–∏ 25 –µ–¥–∏–Ω–∏—Ü"  ‚Üí "25"
"–î–æ—Å—Ç—É–ø–Ω–æ: 7"          ‚Üí "7"
"–í –Ω–∞–ª–∏—á–∏–∏"            ‚Üí "" (–ø—É—Å—Ç–æ)
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ keywords –¥–ª—è –Ω–∞–ª–∏—á–∏—è

–ï—Å–ª–∏ –Ω–∞ viatec.ua –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥—Ä—É–≥–∏–µ —Ñ—Ä–∞–∑—ã, –æ–±–Ω–æ–≤–∏ –≤ `pipelines.py` (—Å—Ç—Ä–æ–∫–∏ 198-223):

```python
# –¢–æ–≤–∞—Ä –í –ù–ê–õ–ò–ß–ò–ò
in_stock_keywords = [
    "—î –≤ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ",
    "–≤ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ",
    "–≤ –Ω–∞–ª–∏—á–∏–∏",
    "–µ—Å—Ç—å",
    "–¥–æ—Å—Ç—É–ø–Ω–æ",
    "available",
    "in stock",
    # –î–æ–±–∞–≤—å —Å–≤–æ–∏ —Ñ—Ä–∞–∑—ã:
    # "–Ω–∞ —Å–∫–ª–∞–¥—ñ",
    # "–≥–æ—Ç–æ–≤–∏–π –¥–æ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏",
]

# –¢–æ–≤–∞—Ä –ù–ï –í –ù–ê–õ–ò–ß–ò–ò
out_of_stock_keywords = [
    "–Ω–µ–º–∞—î",
    "–Ω–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏",
    "–≤—ñ–¥—Å—É—Ç–Ω—ñ–π",
    "–∑–∞–∫—ñ–Ω—á–∏–≤—Å—è",
    "out of stock",
    # –î–æ–±–∞–≤—å —Å–≤–æ–∏ —Ñ—Ä–∞–∑—ã:
    # "–ø—ñ–¥ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è" (–µ—Å–ª–∏ —ç—Ç–æ –ù–ï –≤ –Ω–∞–ª–∏—á–∏–∏),
]
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ spider'–∞:

1. –û—Ç–∫—Ä–æ–π `C:\FullStack\Scrapy\output\prom_import.csv`
2. –ü—Ä–æ–≤–µ—Ä—å:
   - ‚úÖ –í—Å–µ —Ç–æ–≤–∞—Ä—ã –∏–º–µ—é—Ç —Ü–µ–Ω—É
   - ‚úÖ –í—Å–µ —Ç–æ–≤–∞—Ä—ã –≤ –∫–æ–ª–æ–Ω–∫–µ "–ù–∞—è–≤–Ω—ñ—Å—Ç—å" –∏–º–µ—é—Ç "+"
   - ‚úÖ –ï—Å–ª–∏ –µ—Å—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ - –æ–Ω–æ –≤ –∫–æ–ª–æ–Ω–∫–µ "–ö—ñ–ª—å–∫—ñ—Å—Ç—å"

---

## üéØ –ì–æ—Ç–æ–≤–æ!

–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤–∫–ª—é—á–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ spider'–∞.

–ó–∞–ø—É—Å–∫–∞–π:
```bash
scrapy crawl viatec_retail
```

–ò –ø—Ä–æ–≤–µ—Ä—è–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤:
```
C:\FullStack\Scrapy\output\prom_import.csv
```
