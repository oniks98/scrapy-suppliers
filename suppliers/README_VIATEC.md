# Viatec.ua Scrapy Spiders

–î–≤–∞ spider'–∞ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å viatec.ua:
1. **viatec_retail** - —Ä–æ–∑–Ω–∏—á–Ω—ã–µ —Ü–µ–Ω—ã (UAH)
2. **viatec_dealer** - –¥–∏–ª–µ—Ä—Å–∫–∏–µ —Ü–µ–Ω—ã (USD, —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)

## üìã –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
cd C:\FullStack\Scrapy\suppliers
pip install -r requirements.txt
```

## üöÄ –ó–∞–ø—É—Å–∫

### 1Ô∏è‚É£ –†–æ–∑–Ω–∏—á–Ω—ã–π spider (UAH)
```bash
scrapy crawl viatec_retail
```

–†–µ–∑—É–ª—å—Ç–∞—Ç: `C:\Users\stalk\Documents\Prom\prom_import.csv`

### 2Ô∏è‚É£ –î–∏–ª–µ—Ä—Å–∫–∏–π spider (USD)
```bash
scrapy crawl viatec_dealer
```

–†–µ–∑—É–ª—å—Ç–∞—Ç: `C:\Users\stalk\Documents\Prom\prom_diler_import.csv`

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –£—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–∏–ª–µ—Ä—Å–∫–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
–§–∞–π–ª: `C:\FullStack\Scrapy\suppliers\.env`
```
VIATEC_EMAIL=oniksdnipro@gmail.com
VIATEC_PASSWORD=Tvsat988
```

### –ú–∞–ø–ø–∏–Ω–≥ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
–§–∞–π–ª: `C:\FullStack\Scrapy\data\category_matching_viatec.csv`

–§–æ—Ä–º–∞—Ç:
```csv
–õ–∏–Ω–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞;–ö–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–∞ –º–æ–µ–º —Å–∞–π—Ç–µ_RU;–ö–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–∞ –º–æ–µ–º —Å–∞–π—Ç–µ_UA
https://viatec.ua/catalog/cameras/...;–í–∏–¥–µ–æ–∫–∞–º–µ—Ä—ã;–í—ñ–¥–µ–æ–∫–∞–º–µ—Ä–∏
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è CSV (—Ñ–æ—Ä–º–∞—Ç PROM):
- `–ö–æ–¥_—Ç–æ–≤–∞—Ä—É` - –∞—Ä—Ç–∏–∫—É–ª —Ç–æ–≤–∞—Ä–∞
- `–ù–∞–∑–≤–∞_–ø–æ–∑–∏—Ü—ñ—ó` / `–ù–∞–∑–≤–∞_–ø–æ–∑–∏—Ü—ñ—ó_—É–∫—Ä` - –Ω–∞–∑–≤–∞–Ω–∏–µ (RU/UA)
- `–ü–æ—à—É–∫–æ–≤—ñ_–∑–∞–ø–∏—Ç–∏` / `–ü–æ—à—É–∫–æ–≤—ñ_–∑–∞–ø–∏—Ç–∏_—É–∫—Ä` - –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- `–û–ø–∏—Å` / `–û–ø–∏—Å_—É–∫—Ä` - –æ–ø–∏—Å–∞–Ω–∏–µ (RU/UA)
- `–¶—ñ–Ω–∞` - —Ü–µ–Ω–∞
- `–í–∞–ª—é—Ç–∞` - UAH –¥–ª—è —Ä–æ–∑–Ω–∏—Ü—ã, USD –¥–ª—è –¥–∏–ª–µ—Ä–∞
- `–ü–æ—Å–∏–ª–∞–Ω–Ω—è_–∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è` - —Å—Å—ã–ª–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- `–ù–∞—è–≤–Ω—ñ—Å—Ç—å` - —Å—Ç–∞—Ç—É—Å –Ω–∞–ª–∏—á–∏—è
- `–ù–∞–∑–≤–∞_–≥—Ä—É–ø–∏` - –∫–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–æ–≤–∞—Ä–∞
- `–í–∏—Ä–æ–±–Ω–∏–∫` - –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å
- –î–æ 30 —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ —Ç–æ–≤–∞—Ä–∞

### –§–æ—Ä–º–∞—Ç –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
–°–æ–≥–ª–∞—Å–Ω–æ –æ–±—Ä–∞–∑—Ü—É –∏–∑ `product_sample_viatec.csv`:
```
"IP –≤—ñ–¥–µ–æ–∫–∞–º–µ—Ä–∞ Hikvision DS-2CD1021G0-I 2–ú–ü (2.8–º–º), IP, –≤—ñ–¥–µ–æ–∫–∞–º–µ—Ä–∞, Hikvision, DS-2CD1021G0-I 2–ú–ü, (2.8–º–º)"
```

–§–æ—Ä–º–∞—Ç: `–ü–æ–ª–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ, –°–ª–æ–≤–æ1, –°–ª–æ–≤–æ2, –°–ª–æ–≤–æ3, ...`

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤

**–í–ê–ñ–ù–û:** –°–µ–ª–µ–∫—Ç–æ—Ä—ã –≤ spider'–∞—Ö —è–≤–ª—è—é—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω—ã–º–∏ –∏ —Ç—Ä–µ–±—É—é—Ç –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –ø–æ–¥ —Ä–µ–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É viatec.ua.

### –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

1. **–°–ø–∏—Å–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö:**
   - `response.css("a.product-link::attr(href)")`
   - –ó–∞–º–µ–Ω–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è —Å—Å—ã–ª–æ–∫ –Ω–∞ —Ç–æ–≤–∞—Ä—ã

2. **–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞:**
   - `response.css("h1.product-name::text")`
   
3. **–¶–µ–Ω–∞:**
   - –†–æ–∑–Ω–∏—Ü–∞: `response.css("span.price::text")`
   - –î–∏–ª–µ—Ä: `response.css("span.dealer-price::text")`

4. **–ö–æ–¥ —Ç–æ–≤–∞—Ä–∞:**
   - `response.css("span.product-code::text")`

5. **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:**
   - `response.css("img.product-image::attr(src)")`

6. **–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
   - `response.css("table.specifications tr")`

### –ö–∞–∫ –Ω–∞–π—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã:

1. –û—Ç–∫—Ä–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—É viatec.ua –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ù–∞–∂–º–∏ F12 (DevTools)
3. –ò—Å–ø–æ–ª—å–∑—É–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç "Inspect Element"
4. –û–±–Ω–æ–≤–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –≤ —Ñ–∞–π–ª–∞—Ö spider'–æ–≤

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –í–∫–ª—é—á–∏—Ç—å DEBUG —Ä–µ–∂–∏–º:
```bash
scrapy crawl viatec_retail -s LOG_LEVEL=DEBUG
```

### –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ (–¥–ª—è —Ç–µ—Å—Ç–æ–≤):
```bash
scrapy crawl viatec_retail -s CLOSESPIDER_ITEMCOUNT=10
```

### –í–∫–ª—é—á–∏—Ç—å HTTP –∫—ç—à (—É—Å–∫–æ—Ä–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ):
–í `settings.py` —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π:
```python
HTTPCACHE_ENABLED = True
HTTPCACHE_EXPIRATION_SECS = 86400
```

## üìù –õ–æ–≥–∏

–õ–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å. –î–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª –¥–æ–±–∞–≤—å –≤ `settings.py`:
```python
LOG_FILE = r"C:\FullStack\Scrapy\suppliers\scrapy.log"
```

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (viatec_dealer)
- –ü—Ä–æ–≤–µ—Ä—å URL –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ `viatec_dealer.py`
- –ü—Ä–æ–≤–µ—Ä—å —Å–µ–ª–µ–∫—Ç–æ—Ä—ã —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞
- –ü—Ä–æ–≤–µ—Ä—å –Ω–∞–ª–∏—á–∏–µ CSRF —Ç–æ–∫–µ–Ω–∞

### 2. –ù–µ –ø–∞—Ä—Å—è—Ç—Å—è —Ç–æ–≤–∞—Ä—ã
- –ü—Ä–æ–≤–µ—Ä—å —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –¥–ª—è —Å–ø–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π `scrapy shell "URL"` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤

### 3. –ù–µ —Å–æ–∑–¥–∞—é—Ç—Å—è CSV —Ñ–∞–π–ª—ã
- –ü—Ä–æ–≤–µ—Ä—å –ø—É—Ç—å: `C:\Users\stalk\Documents\Prom\`
- –£–±–µ–¥–∏—Å—å, —á—Ç–æ –ø–∞—É–∫ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç items —Å –ø–æ–ª–µ–º `price_type`

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö spider'–æ–≤
scrapy list

# –¢–µ—Å—Ç —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ
scrapy shell "https://viatec.ua/catalog/cameras/"

# –ó–∞–ø—É—Å–∫ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
scrapy crawl viatec_retail -s CONCURRENT_REQUESTS=1 -s DOWNLOAD_DELAY=3
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–≤–µ—Ä—å:
1. –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ –Ω–∞ viatec.ua
2. –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —É—á—ë—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ `.env`
3. –ù–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (`pip install -r requirements.txt`)
