# Changelog

## 2025-11-24 - Исправление создания файлов пауками

### Проблема
Оба паука (`viatec_retail` и `viatec_dealer`) создавали оба файла вывода:
- `prom_import.csv` (розничные цены)
- `prom_diler_import.csv` (дилерские цены)

Это происходило независимо от того, какой паук был запущен.

### Решение
Обновлён файл `suppliers/pipelines.py`:

**Метод `open_spider`:**
- Добавлена проверка `spider.name`
- `viatec_retail` теперь создаёт **только** `prom_import.csv`
- `viatec_dealer` теперь создаёт **только** `prom_diler_import.csv`

**Метод `close_spider`:**
- Статистика теперь показывается в зависимости от запущенного паука

**Метод `process_item`:**
- Добавлены проверки существования файлов перед записью

### Изменённые файлы
1. `suppliers/pipelines.py` - основная логика создания файлов
2. `suppliers/spiders/viatec_dealer.py` - обновлена документация
3. `suppliers/spiders/viatec_retail.py` - обновлена документация

### Результат
✅ Каждый паук создаёт только свой файл данных
✅ Логи показывают корректную информацию о созданном файле
✅ Статистика отображается только для запущенного паука
